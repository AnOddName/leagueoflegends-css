@import (reference) "style-darkmode";

// Variables
@darkmode-selector: ~"html:lang(dd)";
@nightmode-selector: ~"html.res-nightmode";

/*************************
* Darkmode and nightmode *
*************************/

.dark-tagline {
	color: @dark-tagline-color;
}

@{darkmode-selector}, @{nightmode-selector} {
	body > .content {
		background-color: @dark-content-bg;
		border-right: 1px solid @tabs-bg;
	}
	
	.content .md {
		color: @dark-content-text-color;
		
		code {
			background-color: @color-black;
			border-color: @dark-content-text-border;
		}
	}
	
	#noresults {
		background-color: @color-dark-gray;
		color: @color-dark-gray;
	}
	
	// General
	.arrow {
	    background-image: url(%%arrows-bot-dark%%) !important;
		
		&::after {
		    background-image: url(%%arrows-top-dark%%) !important;
		}
	}
	
	// Links
	.entry .tagline,
	.entry .buttons li a,
	.entry time {
		&:extend(.dark-tagline);
	}
	
	.thing.link {
		border-color: darken(@dark-content-bg, 20%);
		
		&.self {
			.expando .md {
				background-color: @dark-content-text-bg;
				border-color: @dark-content-text-border;
			}
		}
		
		&.stickied {
			.title {
				a.title {
					color: @dark-sticky-color  !important;
				}
			}
		}
		
		.stickied-tagline {
			color: @dark-sticky-color;
		}
		
		.domain a:extend(.dark-tagline) {}
	}
	
	// Comments
	.comments-page .commentarea {
		.generate-comment-bgs(11);
		.generate-comment-bgs(@max-i; @i: 1) when (@i <= @max-i) {
			.comment when (mod(@i, 2) = 0) {
				&:extend(.dark-comment2);
				.generate-comment-bgs(@max-i; @i + 1);
			}
			.comment when (mod(@i, 2) = 1) {
				&:extend(.dark-comment);
				.generate-comment-bgs(@max-i; @i + 1);
			}
		}
		
		textarea {
			background-color: @color-black;
			border-color: @color-dark-gray;
			
			color: @dark-comment-input-color;
		}
	}
	
	.thing.comment,
	&.res-commentBoxes.res-commentBoxes-rounded .content .thing.comment {
		border-color: @dark-content-text-border !important;
		
		&:hover {
			border-color: @dark-content-text-border !important;
		}
	}
	
	// Highlighted comment after clicking "permalink"
	.usertext.border .usertext-body {
		background-color: lighten(@dark-content-text-bg, 5%);
	}
}

.dark-comment {
	background-color: @dark-comment-lvl1-bg !important;
}
.dark-comment2 {
	background-color: @dark-comment-lvl2-bg !important;
}

/****************
* RES nightmode *
****************/

.nightmode-bg-fix() {
	background-color: transparent !important;
}

@{nightmode-selector} {
	ol,
	#header,
	#header-bottom-left,
	:not([class*="-page"]) .content[role="main"],
	.listing-page .link,
	.submit-page .content,
	.icon-menu a,
	.side blockquote ul,
	.side .leavemoderator,
	.side .leavecontributor-button,
	.sidebox,
	.sidecontentbox .content,
	.titlebox,
	.titlebox form.flairtoggle {
		.nightmode-bg-fix();
	}
	
	h1 {
		border: none;
	}
	
	.side {
		blockquote {
			background: none;
		}
	}
}

// Importants applied:
// .tabmenu li a: background, color, hover color
// .side: border-right, border-bottom
// .side-dark-textfield(): background-color
// #searchexpando: border-color
// .linkinfo
